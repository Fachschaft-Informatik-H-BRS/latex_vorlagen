% 1.0.0.0_config/footer_header.tex
\makeatletter
\@ifclassloaded{beamer}{%
  % ===== BEAMER: eigener Head-/Foot-Bereich, fancyhdr wird NICHT genutzt =====
  \providecolor{fscolor}{rgb}{0.043,0.631,0.886} % Fallback, falls nicht in config.tex gesetzt
  \providecolor{FSGray}{rgb}{0.945,0.953,0.961}

  % Farben der Leisten
  \setbeamercolor{headline}{bg=FSGray, fg=black}
  \setbeamercolor{footline}{bg=FSGray, fg=black}
  \setbeamercolor{author in head/foot}{fg=black,bg=FSGray}
  \setbeamercolor{title in head/foot}{fg=black,bg=FSGray}
  \setbeamercolor{date in head/foot}{fg=black,bg=FSGray}

  % Obere Leiste: links Abschnitt, rechts Seitenzahl in fscolor-Kachel
  \setbeamertemplate{headline}{%
    \leavevmode
    \begin{beamercolorbox}[wd=\paperwidth,ht=2.6ex,dp=1ex,leftskip=1em,rightskip=1em]{headline}
      {\usebeamerfont{section in head/foot}\insertsectionhead}
      \hfill
      \tikz[baseline= (n.base)]\node[
        fill=cyan, inner sep=2pt, minimum width=13mm, minimum height=1.7ex,
        align=center, text=white, font=\normalsize
      ] (n){\insertframenumber{} / \inserttotalframenumber};
    \end{beamercolorbox}%
  }

  % Untere Leiste: Autor | Titel | Seite/Total
  \setbeamertemplate{footline}{%
    \leavevmode
    \begin{beamercolorbox}[wd=\paperwidth,ht=2.4ex,dp=1ex,leftskip=1em,rightskip=1em]{footline}
      \insertshortauthor{} \hfill \insertshorttitle{}
    \end{beamercolorbox}%
  }


  % Inhalte referenzieren \tikzhead/\tikzheade -> unter beamer harmlos machen
  \providecommand*\tikzhead{}
  \providecommand*\tikzheade{}

}{%
  % ===== NICHT-BEAMER: dein Original mit fancyhdr und TikZ-Overlay =====
  \fancyhead[OR,EL]{}
  \fancyhead[ER]{\tikzheade}
  \fancyhead[OL]{\tikzhead}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}

  \pagestyle{fancy}
  \fancypagestyle{plain}{
    \renewcommand{\headrulewidth}{0pt}
    \fancyhf{}
  }
  \usetikzlibrary{calc}

  \newcommand*\tikzhead{%
    \begin{tikzpicture}[remember picture,overlay]
      \node[fill=fscolor,xshift=-0.35cm,yshift=-0.3cm,anchor=east,font=\color{white},
            text width=13mm,inner sep=3pt,align=left,minimum height=15pt]
            at ($(current page.north east)+(6pt,-1)$) {\phantom{a}\arabic{page}};
      \node[anchor=east,xshift=-0.5cm,yshift=-0.3cm,inner sep=3pt,font=\color{fscolor}]
            at ($(current page.north east)+(-1.25,-1)$) {\sectiontitle};
    \end{tikzpicture}
  }

  \newcommand*\tikzheade{%
    \begin{tikzpicture}[remember picture,overlay]
      \node[xshift=0.35cm,yshift=-0.3cm,fill=fscolor,anchor=west,font=\color{white},
            text width=13mm,inner sep=3pt,align=right,minimum height=15pt]
            at ($(current page.north west)-(6pt,1)$) {\arabic{page}\phantom{a}};
      \node[anchor=west,xshift=0.5cm,yshift=-0.3cm,inner sep=3pt,font=\color{fscolor}]
            at ($(current page.north west)+(1.25,-1)$) {\sectiontitle};
    \end{tikzpicture}
  }
}%
\makeatother